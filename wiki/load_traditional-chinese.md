<!--
Meta Description: # Ruby 的 load 方法詳解：動態載入 Ruby 檔案 ## 概要 `load` 是 Ruby 中的一個重要方法，用於動態載入並執行指定的 Ruby 檔案。它提供了一種靈活的方式來引入外部代碼，並且每次調用時都會重新載入檔案，這對於開發和測試環境尤為重要。 ## 文檔 ### 目的 `loa...
Meta Keywords: load, ruby, hello, greet, wrap
-->

# Ruby 的 load 方法詳解：動態載入 Ruby 檔案

## 概要
`load` 是 Ruby 中的一個重要方法，用於動態載入並執行指定的 Ruby 檔案。它提供了一種靈活的方式來引入外部代碼，並且每次調用時都會重新載入檔案，這對於開發和測試環境尤為重要。

## 文檔
### 目的
`load` 方法的主要目的是允許開發者在運行時加載和執行 Ruby 檔案。這對於需要在程式運行過程中更改行為或配置的情境非常有用。

### 使用方法
```ruby
load(file, wrap = false)
```
- **file**：要載入的 Ruby 檔案的路徑，可以是相對路徑或絕對路徑。
- **wrap**（選擇性）：如果設置為 `true`，則在載入檔案時將該檔案的內容包裝在一個方法中，這樣可以避免全局變數的污染。

### 詳細資訊
1. **重載行為**：每次調用 `load` 時，指定的檔案都會被重新載入，這意味著任何在該檔案中定義的變數或方法都會被重新定義。
2. **與 require 的區別**：`load` 與 `require` 的主要區別在於，`require` 只會在檔案未被載入時載入一次，而 `load` 會每次都載入檔案。
3. **執行環境**：載入的文件在當前上下文中執行，因此可能會影響當前的變數和方法。

## 範例
### 基本使用範例
```ruby
# 假設有一個檔案 hello.rb，內容如下：
# puts "Hello, World!"

load 'hello.rb'  # 這會輸出 "Hello, World!"
```

### 使用 wrap 參數
```ruby
# hello_with_wrap.rb 內容如下：
# def greet
#   puts "Hello from greet!"
# end

load 'hello_with_wrap.rb', true  # 使用 wrap 參數，將 greet 方法包裝起來
greet  # 調用 greet 方法，輸出 "Hello from greet!"
```

## 解釋
### 常見問題
1. **檔案路徑錯誤**：確保提供的檔案路徑正確。如果檔案不存在，將會引發錯誤。
2. **全局變數污染**：使用 `load` 時要小心全局變數的污染，因為每次載入都會重新定義變數。
3. **性能考量**：由於 `load` 每次都會重新載入檔案，頻繁使用可能影響性能，特別是在大型應用中。

## 一句總結
`load` 方法允許 Ruby 開發者在運行時動態載入和執行檔案，提供靈活的代碼管理方式。