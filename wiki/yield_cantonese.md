<!--
Meta Description: # Ruby 的 yield：高效的區塊傳遞 ## 摘要 `yield` 是 Ruby 語言中的一個關鍵字，用來在方法中傳遞區塊，使得方法能夠在執行過程中調用這些區塊，從而實現更高的靈活性和可重用性。 ## 文檔 在 Ruby 中，`yield` 主要用於將控制權從方法轉移到傳入的區塊。當方法執行到...
Meta Keywords: yield, ruby, greet, calculate, 將會引發
-->

# Ruby 的 yield：高效的區塊傳遞

## 摘要
`yield` 是 Ruby 語言中的一個關鍵字，用來在方法中傳遞區塊，使得方法能夠在執行過程中調用這些區塊，從而實現更高的靈活性和可重用性。

## 文檔
在 Ruby 中，`yield` 主要用於將控制權從方法轉移到傳入的區塊。當方法執行到 `yield` 時，會暫停方法的執行並轉而執行區塊的內容。這使得我們可以在方法內部動態地執行不同的代碼，根據需要提供定制的行為。

### 用法
- `yield` 可以接受參數，這些參數會被傳遞給區塊。
- 如果方法中沒有提供區塊，調用 `yield` 將會引發 `LocalJumpError`。

### 例子
以下是 `yield` 的基本用法示例：

```ruby
def greet
  yield "你好"
end

greet { |message| puts message }
```
輸出：
```
你好
```

在這個例子中，`greet` 方法接受一個區塊，並在執行到 `yield` 時將字符串 "你好" 傳遞給該區塊。

```ruby
def calculate
  yield 2, 3
end

calculate { |a, b| puts a + b }
```
輸出：
```
5
```

在這個例子中，`calculate` 方法將兩個數字 2 和 3 傳遞給區塊，區塊內的程式碼負責計算和輸出它們的總和。

## 解釋
使用 `yield` 時，有幾個常見的陷阱和注意事項：
1. **區塊的存在性**：調用 `yield` 時必須確保方法有區塊，如果沒有，將會引發 `LocalJumpError`。
2. **可重用性**：`yield` 提供了強大的靈活性，但在設計方法時要考慮這是否會使代碼變得難以理解。
3. **上下文**：`yield` 在方法內部執行，因此區塊中可以訪問方法內的局部變量，但不能訪問方法外的局部變量。

## 總結
`yield` 是 Ruby 中一個強大的功能，能夠讓方法動態地與區塊交互，增強代碼的靈活性和可重用性。